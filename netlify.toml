[build]
  publish = "."
  functions = "netlify/functions"

[functions]
  included_files = ["db/dharmaseed_talks.json", "db/dharmaseed_teachers.json"]

# Dharmaseed-style URL redirects
# /teacher/637/ -> /?teacher=637
[[redirects]]
  from = "/teacher/:id"
  to = "/?teacher=:id"
  status = 302

[[redirects]]
  from = "/teacher/:id/"
  to = "/?teacher=:id"
  status = 302

# /talks/94960/ -> /?talk=94960
[[redirects]]
  from = "/talks/:id"
  to = "/?talk=:id"
  status = 302

[[redirects]]
  from = "/talks/:id/"
  to = "/?talk=:id"
  status = 302

# Proxy RSS feeds to Dharmaseed
[[redirects]]
  from = "/feeds/*"
  to = "https://www.dharmaseed.org/feeds/:splat"
  status = 200
  force = true

# Proxy API requests to Dharmaseed (for future use)
[[redirects]]
  from = "/api/*"
  to = "https://www.dharmaseed.org/api/1/:splat"
  status = 200
  force = true
